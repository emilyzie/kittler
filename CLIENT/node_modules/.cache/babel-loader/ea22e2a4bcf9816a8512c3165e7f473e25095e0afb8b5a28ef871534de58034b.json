{"ast":null,"code":"const fetch = require('node-fetch');\nconst search = async function (query, nb) {\n  let url = \"https://www.youtube.com/results?search_query=\" + query;\n  return fetch(url).then(res => res.text()).then(body => {\n    let val1 = body.search('itemSectionRenderer');\n    let val2 = body.search('},{\\\"continuationItemRenderer');\n    body = body.slice(val1, val2);\n    body = \"{\\\"\" + body + \"}\";\n    body = JSON.parse(body);\n    if (nb) {\n      var max = nb;\n    } else {\n      var max = 3;\n    }\n    let c = 0;\n    let i = 0;\n    var result = [];\n    while (c < max) {\n      if (body.itemSectionRenderer.contents[i].videoRenderer) {\n        var res = {\n          id: body.itemSectionRenderer.contents[i].videoRenderer.videoId,\n          title: body.itemSectionRenderer.contents[i].videoRenderer.title.runs[0].text,\n          time: body.itemSectionRenderer.contents[i].videoRenderer.lengthText.simpleText,\n          link: \"https://www.youtube.com/watch?v=\" + body.itemSectionRenderer.contents[i].videoRenderer.videoId,\n          thumbnail: \"https://i.ytimg.com/vi/\" + body.itemSectionRenderer.contents[i].videoRenderer.videoId + \"/hqdefault.jpg\"\n        };\n        result.push(res);\n        i++;\n        c++;\n      } else {\n        i++;\n      }\n    }\n    return result;\n  });\n};\nexports.search = search;","map":{"version":3,"names":["fetch","require","search","query","nb","url","then","res","text","body","val1","val2","slice","JSON","parse","max","c","i","result","itemSectionRenderer","contents","videoRenderer","id","videoId","title","runs","time","lengthText","simpleText","link","thumbnail","push","exports"],"sources":["/Users/midhu1/Projects/mediaconsumption/CLIENT/node_modules/@citoyasha/yt-search/yt_search.js"],"sourcesContent":["const fetch = require('node-fetch');\n\nconst search = async function(query, nb){\nlet url = \"https://www.youtube.com/results?search_query=\"+query;\n  return fetch(url)\n    .then(res => res.text())\n    .then(body => {\n      let val1 = body.search('itemSectionRenderer');\n      let val2 = body.search('},{\\\"continuationItemRenderer');\n      body = body.slice(val1, val2);\n      body = \"{\\\"\"+body+\"}\";\n      body = JSON.parse(body);\n      if(nb){\n        var max = nb;\n      } else { \n        var max = 3;\n      }\n      let c = 0;\n      let i = 0;\n      var result = [];\n      while(c<max){\n        if(body.itemSectionRenderer.contents[i].videoRenderer){\n          var res = \n            {\n              id: body.itemSectionRenderer.contents[i].videoRenderer.videoId,\n             title: body.itemSectionRenderer.contents[i].videoRenderer.title.runs[0].text,\n             time: body.itemSectionRenderer.contents[i].videoRenderer.lengthText.simpleText,\n              link: \"https://www.youtube.com/watch?v=\"+body.itemSectionRenderer.contents[i].videoRenderer.videoId,\n              thumbnail: \"https://i.ytimg.com/vi/\"+body.itemSectionRenderer.contents[i].videoRenderer.videoId+\"/hqdefault.jpg\"\n            }\n          result.push(res);\n          i++;\n          c++;\n        } else {\n          i++;\n        }\n      }   \n      return result;\n    });\n};\n\nexports.search = search;\n"],"mappings":"AAAA,MAAMA,KAAK,GAAGC,OAAO,CAAC,YAAY,CAAC;AAEnC,MAAMC,MAAM,GAAG,eAAAA,CAAeC,KAAK,EAAEC,EAAE,EAAC;EACxC,IAAIC,GAAG,GAAG,+CAA+C,GAACF,KAAK;EAC7D,OAAOH,KAAK,CAACK,GAAG,CAAC,CACdC,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACvBF,IAAI,CAACG,IAAI,IAAI;IACZ,IAAIC,IAAI,GAAGD,IAAI,CAACP,MAAM,CAAC,qBAAqB,CAAC;IAC7C,IAAIS,IAAI,GAAGF,IAAI,CAACP,MAAM,CAAC,+BAA+B,CAAC;IACvDO,IAAI,GAAGA,IAAI,CAACG,KAAK,CAACF,IAAI,EAAEC,IAAI,CAAC;IAC7BF,IAAI,GAAG,KAAK,GAACA,IAAI,GAAC,GAAG;IACrBA,IAAI,GAAGI,IAAI,CAACC,KAAK,CAACL,IAAI,CAAC;IACvB,IAAGL,EAAE,EAAC;MACJ,IAAIW,GAAG,GAAGX,EAAE;IACd,CAAC,MAAM;MACL,IAAIW,GAAG,GAAG,CAAC;IACb;IACA,IAAIC,CAAC,GAAG,CAAC;IACT,IAAIC,CAAC,GAAG,CAAC;IACT,IAAIC,MAAM,GAAG,EAAE;IACf,OAAMF,CAAC,GAACD,GAAG,EAAC;MACV,IAAGN,IAAI,CAACU,mBAAmB,CAACC,QAAQ,CAACH,CAAC,CAAC,CAACI,aAAa,EAAC;QACpD,IAAId,GAAG,GACL;UACEe,EAAE,EAAEb,IAAI,CAACU,mBAAmB,CAACC,QAAQ,CAACH,CAAC,CAAC,CAACI,aAAa,CAACE,OAAO;UAC/DC,KAAK,EAAEf,IAAI,CAACU,mBAAmB,CAACC,QAAQ,CAACH,CAAC,CAAC,CAACI,aAAa,CAACG,KAAK,CAACC,IAAI,CAAC,CAAC,CAAC,CAACjB,IAAI;UAC5EkB,IAAI,EAAEjB,IAAI,CAACU,mBAAmB,CAACC,QAAQ,CAACH,CAAC,CAAC,CAACI,aAAa,CAACM,UAAU,CAACC,UAAU;UAC7EC,IAAI,EAAE,kCAAkC,GAACpB,IAAI,CAACU,mBAAmB,CAACC,QAAQ,CAACH,CAAC,CAAC,CAACI,aAAa,CAACE,OAAO;UACnGO,SAAS,EAAE,yBAAyB,GAACrB,IAAI,CAACU,mBAAmB,CAACC,QAAQ,CAACH,CAAC,CAAC,CAACI,aAAa,CAACE,OAAO,GAAC;QAClG,CAAC;QACHL,MAAM,CAACa,IAAI,CAACxB,GAAG,CAAC;QAChBU,CAAC,EAAE;QACHD,CAAC,EAAE;MACL,CAAC,MAAM;QACLC,CAAC,EAAE;MACL;IACF;IACA,OAAOC,MAAM;EACf,CAAC,CAAC;AACN,CAAC;AAEDc,OAAO,CAAC9B,MAAM,GAAGA,MAAM"},"metadata":{},"sourceType":"script","externalDependencies":[]}